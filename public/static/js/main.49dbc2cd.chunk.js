(this.webpackJsonpbase=this.webpackJsonpbase||[]).push([[0],{259:function(e,t,n){},269:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var a,r,s,c=n(0),o=n.n(c),l=n(60),i=n.n(l),d=n(17),u=n(20),b=n(10),j=n(19),m=n.n(j),x=n(34),h=n(13),g=n(2),p=function(e){var t=e.children;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"body-bg min-h-screen pt-12 md:pt-20 pb-6 px-2 md:px-0",style:{fontFamily:'"Lato",sans-serif',background:"linear-gradient(to right, #00c6ff, #0072ff)"},children:[Object(g.jsx)("header",{className:"max-w-lg mx-auto",children:Object(g.jsx)("p",{children:Object(g.jsx)("h1",{className:"text-4xl font-bold text-white text-center",children:"Random chat"})})}),t,Object(g.jsxs)("footer",{className:"max-w-lg mx-auto flex justify-center text-white",children:[Object(g.jsx)("p",{className:"hover:underline",children:"Contacto"}),Object(g.jsx)("span",{className:"mx-3",children:"\u2022"}),Object(g.jsx)("p",{className:"hover:underline",children:"Privacy"})]})]})})},O=Object(c.memo)(p),f={info:{color:"blue",logo:function(){return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"flex-none fill-current text-blue-500 h-4 w-4",children:Object(g.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-.001 5.75c.69 0 1.251.56 1.251 1.25s-.561 1.25-1.251 1.25-1.249-.56-1.249-1.25.559-1.25 1.249-1.25zm2.001 12.25h-4v-1c.484-.179 1-.201 1-.735v-4.467c0-.534-.516-.618-1-.797v-1h3v6.265c0 .535.517.558 1 .735v.999z"})})}},success:{color:"green",logo:function(){return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"flex-none fill-current text-green-500 h-4 w-4",children:Object(g.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.25 16.518l-4.5-4.319 1.396-1.435 3.078 2.937 6.105-6.218 1.421 1.409-7.5 7.626z"})})}},error:{color:"red",logo:function(){return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"flex-none fill-current text-red-500 h-4 w-4",children:Object(g.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.597 17.954l-4.591-4.55-4.555 4.596-1.405-1.405 4.547-4.592-4.593-4.552 1.405-1.405 4.588 4.543 4.545-4.589 1.416 1.403-4.546 4.587 4.592 4.548-1.403 1.416z"})})}}},v=function(e){var t=e.type,n=void 0===t?"info":t,a=e.msg,r=void 0===a?"message":a;return Object.keys(f).includes(n)?Object(g.jsx)("div",{className:"bg-".concat(f[n].color,"-100 p-5 w-full border-l-4 border-").concat(f[n].color,"-500 shadow my-1"),children:Object(g.jsxs)("div",{className:"flex space-x-3",children:[f[n].logo(),Object(g.jsx)("div",{className:"flex-1 leading-tight text-sm text-".concat(f[n].color,"-700"),children:r})]})}):null},w=function(e){var t=e.formik;return Object(g.jsxs)("form",{className:"flex flex-col",onSubmit:t.handleSubmit,children:[t.touched.email&&t.errors.email?Object(g.jsx)(v,{type:"error",msg:t.errors.email}):null,Object(g.jsxs)("div",{className:"mb-6 pt-3 rounded bg-gray-200",children:[Object(g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-blue-600 transition duration-500 px-3 pb-3 ".concat(t.touched.email&&t.errors.email&&"border-red-600"),type:"text",id:"email",name:"email",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.email})]}),t.touched.password&&t.errors.password?Object(g.jsx)(v,{type:"error",msg:t.errors.password}):null,Object(g.jsxs)("div",{className:"mb-6 pt-3 rounded bg-gray-200",children:[Object(g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-blue-600 transition duration-500 px-3 pb-3 ".concat(t.touched.password&&t.errors.password&&"border-red-600"),type:"password",id:"password",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.password})]}),Object(g.jsx)("div",{className:"flex justify-end",children:Object(g.jsx)("p",{className:"text-sm text-blue-600 hover:text-blue-700 hover:underline mb-6",children:"olvidaste tu contrase\xf1a?"})}),Object(g.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-200",type:"submit",children:"Login"})]})},y=n(80),N=n(42),k=n(281),M=n(283),S=Object(k.a)(a||(a=Object(d.a)(["\n    mutation loginUser($input: LoginInput!){\n        loginUser(input: $input){\n            token\n        }\n    }\n"]))),U=function(){var e=Object(M.a)(S),t=Object(h.a)(e,1)[0],n=Object(c.useState)(null),a=Object(h.a)(n,2),r=a[0],s=a[1],o=Object(b.g)(),l=Object(y.a)({initialValues:{email:"",password:""},validationSchema:N.a({email:N.b().email("el email no es valido").required("El email no puede ir vacio"),password:N.b().required("El password es obligatorio")}),onSubmit:function(){var e=Object(x.a)(m.a.mark((function e(n){var a,r,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.email,r=n.password,e.prev=1,e.next=4,t({variables:{input:{email:a,password:r}}});case 4:c=e.sent,l=c.data,localStorage.setItem("token",l.loginUser.token),o.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),s(e.t0.message),setTimeout((function(){return s(null)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()});return Object(g.jsx)(O,{children:Object(g.jsxs)("main",{className:"bg-white max-w-lg mx-auto p-8 md:p-12 my-10 rounded-lg shadow-2xl",children:[Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{className:"font-bold text-2xl",children:"Bienvenido"}),Object(g.jsx)("p",{className:"text-gray-600 pt-2",children:"Ingresa a tu cuenta"})]}),Object(g.jsxs)("section",{className:"mt-10",children:[r&&Object(g.jsx)(v,{type:"error",msg:r}),Object(g.jsx)(w,{formik:l})]}),Object(g.jsx)("div",{className:"max-w-lg mx-auto text-center mt-12 mb-6",children:Object(g.jsxs)("p",{className:"text-black",children:["\xbfNo tienes una cuenta?",Object(g.jsx)(u.b,{to:"/signup",className:"underline",children:" Sign Up"}),"."]})})]})})},C=function(e){var t=e.formik;return Object(g.jsxs)("form",{className:"flex flex-col",onSubmit:t.handleSubmit,children:[t.touched.name&&t.errors.name?Object(g.jsx)(v,{type:"error",msg:t.errors.name}):null,Object(g.jsxs)("div",{className:"mb-6 pt-3 rounded bg-gray-200",children:[Object(g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"name",children:"Name"}),Object(g.jsx)("input",{className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-blue-600 transition duration-500 px-3 pb-3 ".concat(t.touched.name&&t.errors.name&&"border-red-600"),type:"text",id:"name",name:"name",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.name})]}),t.touched.email&&t.errors.email?Object(g.jsx)(v,{type:"error",msg:t.errors.email}):null,Object(g.jsxs)("div",{className:"mb-6 pt-3 rounded bg-gray-200",children:[Object(g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-blue-600 transition duration-500 px-3 pb-3 ".concat(t.touched.email&&t.errors.email&&"border-red-600"),type:"text",id:"email",name:"email",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.email})]}),t.touched.password&&t.errors.password?Object(g.jsx)(v,{type:"error",msg:t.errors.password}):null,Object(g.jsxs)("div",{className:"mb-6 pt-3 rounded bg-gray-200",children:[Object(g.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2 ml-3",htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{className:"bg-gray-200 rounded w-full text-gray-700 focus:outline-none border-b-4 border-gray-300 focus:border-blue-600 transition duration-500 px-3 pb-3 ".concat(t.touched.password&&t.errors.password&&"border-red-600"),type:"password",id:"password",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.password})]}),Object(g.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded shadow-lg hover:shadow-xl transition duration-200",type:"submit",children:"Sign Up"})]})},E=Object(k.a)(r||(r=Object(d.a)(["\n    mutation($input: UserInput!){\n        createUser(input: $input) {\n            token\n        }\n    }\n"]))),B=function(){var e=Object(c.useState)(null),t=Object(h.a)(e,2),n=t[0],a=t[1],r=Object(M.a)(E),s=Object(h.a)(r,1)[0],o=Object(b.g)(),l=Object(y.a)({initialValues:{name:"",email:"",password:""},validationSchema:N.a({name:N.b().required("El mombre es obligatorio"),email:N.b().email("el email no es valido").required("El email no puede ir vacio"),password:N.b().required("El password es obligatorio")}),onSubmit:function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r,c,l,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.email,c=t.password,e.prev=1,e.next=4,s({variables:{input:{name:n,email:r,password:c}}});case 4:l=e.sent,i=l.data,localStorage.setItem("token",i.createUser.token),o.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()});return Object(g.jsx)(O,{children:Object(g.jsxs)("main",{className:"bg-white max-w-lg mx-auto p-8 md:p-12 my-10 rounded-lg shadow-2xl",children:[Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{className:"font-bold text-2xl",children:"Bienvenido"}),Object(g.jsx)("p",{className:"text-gray-600 pt-2",children:"Cree una cuenta nueva"})]}),Object(g.jsxs)("section",{className:"mt-10",children:[n&&Object(g.jsx)(v,{type:"error",msg:n}),Object(g.jsx)(C,{formik:l})]}),Object(g.jsx)("div",{className:"max-w-lg mx-auto text-center mt-12 mb-6",children:Object(g.jsxs)("p",{className:"text-black",children:["\xbfYa tienes una cuenta?",Object(g.jsx)(u.b,{to:"/login",className:"underline",children:" Login"}),"."]})})]})})},I=n(282),L=n(32),A=n(142),F=n(279),T=n(280),q=n(138),W=n.n(q),z=n(144),$=Object(A.a)({uri:"http://localhost:4000",fetch:W.a}),P=Object(z.a)((function(e,t){var n=t.headers,a=localStorage.getItem("token");return{headers:Object(L.a)(Object(L.a)({},n),{},{token:a?"".concat(a):""})}})),R=new F.a({connectToDevTools:!0,cache:new T.a,link:P.concat($)}),D=Object(c.createContext)(),H=function(){return Object(g.jsx)("footer",{className:"md:hidden w-full bg-white shadow-xl h-20 fixed bottom-0 p-4",children:Object(g.jsxs)("div",{className:"flex justify-around w-full",children:[Object(g.jsxs)(u.b,{to:"/",className:"text-blue-600 rounded-full cursor-pointer p-2 flex-col items-center hover:bg-blue-200",children:[Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Object(g.jsx)("spam",{children:"Home"})]}),Object(g.jsxs)(u.b,{to:"/myMessages",className:"text-blue-600 rounded-full cursor-pointer p-2 flex-col items-center hover:bg-blue-200",children:[Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),Object(g.jsx)("spam",{children:"My messages"})]})]})})},V=(n(259),function(e){var t=e.user,n=Object(b.g)();return Object(g.jsxs)("li",{className:"toggleable hover:bg-blue-800 hover:text-white",children:[Object(g.jsx)("input",{type:"checkbox",defaultValue:"selected",id:"toggle-one",className:"toggle-input"}),Object(g.jsx)("label",{htmlFor:"toggle-one",className:"block cursor-pointer py-6 px-4 lg:p-6 text-sm lg:text-base font-bold",children:t.name}),Object(g.jsx)("div",{role:"toggle",className:"p-6 z-10 mega-menu mb-16 sm:mb-0 shadow-xl bg-blue-800 sm:w-full md:w-1/2 lg:w-1/3",children:Object(g.jsx)("div",{className:"container mx-auto w-full flex flex-wrap justify-between",children:Object(g.jsxs)("ul",{className:"px-4 sm:w-full  pb-6 pt-6 lg:pt-3",children:[Object(g.jsx)("h3",{className:"font-bold text-xl text-white text-bold mb-2",children:t.email}),Object(g.jsx)("li",{children:Object(g.jsx)("button",{className:"block p-3 hover:bg-blue-600 text-gray-300 hover:text-white",onClick:function(){localStorage.removeItem("token"),R.resetStore(),n.go(0)},children:"Cerrar sesi\xf3n"})})]})})})]})}),J=function(e){var t=e.data;return Object(g.jsx)("nav",{className:"relative bg-white border-b-2 border-gray-300 text-gray-900",children:Object(g.jsxs)("div",{className:"container mx-auto flex justify-between",children:[Object(g.jsx)("div",{className:"relative block p-4 lg:p-6 text-xl text-blue-600 font-bold",children:"Random Chat"}),Object(g.jsxs)("ul",{className:"flex",children:[Object(g.jsx)("li",{className:"hover:bg-blue-800 hover:text-white hidden md:block",children:Object(g.jsx)(u.b,{to:"/",className:"relative block py-6 px-2 lg:p-6 text-sm lg:text-base font-bold",children:"Home"})}),Object(g.jsx)("li",{className:"hover:bg-blue-800 hover:text-white hidden md:block",children:Object(g.jsx)(u.b,{to:"/myMessages",className:"relative block py-6 px-2 lg:p-6 text-sm lg:text-base font-bold",children:"Mis mensajes"})}),(null===t||void 0===t?void 0:t.getUser)?Object(g.jsx)(V,{user:t.getUser}):Object(g.jsx)(u.b,{to:"/login",className:"font-bold hover:underline my-auto mx-4",children:"Ingresa a tu cuenta"})]})]})})},X=Object(k.a)(s||(s=Object(d.a)(["\n  query getUser{\n    getUser{\n      id\n      name\n      email\n    }\n  }\n"]))),Y=function(e){var t=e.children,n=Object(I.a)(X).data;return Object(c.useEffect)((function(){R.resetStore()}),[]),Object(g.jsx)(D.Provider,{value:{data:n},children:Object(g.jsxs)("div",{class:"bg-gray-200 font-sans leading-normal tracking-normal w-screen min-w-full",children:[Object(g.jsx)(J,{data:n}),Object(g.jsx)("div",{className:" bg-gray-200 sm:w-full md:w-3/4 lg:w-1/2 mx-auto p-4",children:t}),Object(g.jsx)(H,{})]})})};function G(){return Object(g.jsx)("div",{className:"p-4 my-2 rounded shadow border-l-4 border-blue-500 w-full h-40 loading",children:Object(g.jsx)("span",{children:"Cargando..."})})}var K,Q,Z,_,ee,te,ne=function(e){var t=new Date(e),n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(t),a=new Intl.DateTimeFormat("en",{month:"short"}).format(t),r=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(t);return"".concat(r,"/").concat(a,"/").concat(n)},ae=function(e){var t=e.message,n=e.own,a=void 0!==n&&n,r=e.setEdit,s=void 0===r?function(){}:r;return Object(g.jsxs)("div",{className:"p-4 my-2 rounded bg-white shadow border-l-4 border-blue-500 w-full",children:[Object(g.jsxs)("div",{className:"flex justify-between",children:[Object(g.jsxs)("p",{className:"text-sm",children:[Object(g.jsx)("span",{className:"font-semibold",children:"publicado: "}),ne(t.createdAt)]}),a&&Object(g.jsxs)("button",{className:"flex items-center rounded-lg px-2 py-1 border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white",onClick:function(){return s(t)},children:[Object(g.jsx)("span",{className:"text-sm",children:"Editar"}),Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})]}),Object(g.jsxs)("p",{className:"ml-4 h-auto overflow-x-auto text-justify",children:['"',t.text,'"']})]})},re=Object(k.a)(K||(K=Object(d.a)(["\n  query getRandomMessage{\n    getRandomMessage {\n      id\n      text\n      createdAt\n    }\n  }\n"]))),se=function(){var e=Object(I.a)(re),t=e.data,n=e.error,a=e.loading,r=e.refetch,s=Object(c.useState)(null),o=Object(h.a)(s,2),l=o[0],i=o[1];if(Object(c.useEffect)((function(){(null===t||void 0===t?void 0:t.getRandomMessage)&&i(t.getRandomMessage)}),[t]),a)return Object(g.jsx)(G,{});if(n)return"error";var d=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"bg-white p-4 rounded shadow w-full flex-col justify-end",children:[l&&Object(g.jsx)(ae,{message:l}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"bg-blue-600 text-white rounded p-2 mx-auto my-2 shadow hover:bg-blue-700",onClick:d,children:"Traer otro mensaje"})})]})},ce=function(e){var t=e.handleSubmit,n=e.initialText,a=void 0===n?"":n,r=Object(c.useState)(a),s=Object(h.a)(r,2),o=s[0],l=s[1];return Object(g.jsxs)("form",{onSubmit:function(e){return t(e,o)},children:[Object(g.jsx)("textarea",{className:"border-2 p-2 border-gray-400 rounded w-full font-semibold focus:outline-none focus:border-blue-600",placeholder:"t\xfa mensaje (logitud maxima 250 caracteres)",value:o,onChange:function(e){return l(e.target.value)}}),Object(g.jsxs)("div",{className:"flex justify-between w-full",children:[Object(g.jsx)("button",{className:"bg-blue-600 text-white rounded p-2 my-2 shadow hover:bg-blue-700",type:"submit",children:"Publicar mensaje"}),Object(g.jsxs)("span",{className:"text-gray-600",children:["caracteres: ",o.length]})]})]})},oe=n(35),le=Object(k.a)(Q||(Q=Object(d.a)(["\n    mutation createMessage($input: MessageInput!){\n        createMessage(input: $input) {\n            text\n        }\n    }\n"]))),ie=function(){var e=Object(M.a)(le),t=Object(h.a)(e,1)[0],n=function(){var e=Object(x.a)(m.a.mark((function e(n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!((a=a.trim()).length<1||a.length>255)){e.next=4;break}return e.abrupt("return",Object(oe.b)("El mensaje debe de tener entre 1 y 255 caracteres"));case 4:return e.prev=4,e.next=7,t({variables:{input:{text:a}}});case 7:oe.b.success("Mensaje publicado"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),oe.b.error("Hubo un error"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"bg-white p-4 rounded shadow w-full flex-col justify-end",children:[Object(g.jsx)(oe.a,{}),Object(g.jsx)(ce,{handleSubmit:n,initialText:""})]})},de=Object(k.a)(Z||(Z=Object(d.a)(["\n  query getUser{\n    getUser{\n      id\n      name\n    }\n  }\n"]))),ue=function(){var e=Object(I.a)(de).data;return Object(g.jsx)(Y,{children:Object(g.jsxs)("div",{className:"p-10 flex flex-col space-y-3",children:[Object(g.jsx)("h1",{className:"font-semibold text-2xl text-center text-gray-800",children:"Mensajes aleatorios"}),Object(g.jsx)(se,{}),(null===e||void 0===e?void 0:e.getUser)&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{className:"font-semibold text-2xl text-center text-gray-800",children:"Publica un mensaje anonimo"}),Object(g.jsx)(ie,{})]})]})})},be=n(141),je=n.n(be),me=Object(k.a)(_||(_=Object(d.a)(["\n    query getUserMessages{\n        getUserMessages {\n            id\n            text\n            createdAt\n        }\n    }\n"]))),xe=Object(k.a)(ee||(ee=Object(d.a)(["\n    mutation updateMessage($input: UpdateMessageInput!){\n        updateMessage(input: $input) {\n            id\n            text\n        }\n  }\n"]))),he=function(){var e=Object(I.a)(me),t=e.data,n=e.loading,a=e.refetch,r=Object(M.a)(xe),s=Object(h.a)(r,1)[0],o=Object(c.useState)(null),l=Object(h.a)(o,2),i=l[0],d=l[1],u=(null===t||void 0===t?void 0:t.getUserMessages)||[],b=function(){var e=Object(x.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((n=n.trim()).length<1||n.length>255)){e.next=4;break}return e.abrupt("return",oe.b.warn("El mensaje debe de tener entre 1 y 255 caracteres"));case 4:return e.prev=4,e.next=7,s({variables:{input:{text:n,id:i.id}}});case 7:d(null),a(),oe.b.success("Mensaje actualizado"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),oe.b.error("Hubo un error");case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(oe.a,{}),Object(g.jsxs)(Y,{children:[Object(g.jsxs)("div",{className:"p-10 flex flex-col space-y-3 mb-20",children:[Object(g.jsx)("h1",{className:"font-semibold text-2xl text-center text-gray-800",children:"Mis mensajes"}),Object(g.jsxs)("div",{className:" p-2 ",children:[n&&Object(g.jsx)(G,{}),0===u.length&&"Aun no tienes mensajes",u.map((function(e){return Object(g.jsx)(ae,{message:e,own:!0,setEdit:d},e.id)}))]})]}),Object(g.jsxs)(je.a,{isOpen:!!i,onRequestClose:function(){return d(null)},contentLabel:"Editar",style:{content:{height:"300px",width:"500px",margin:"auto"}},children:[Object(g.jsx)("button",{className:"float-right",onClick:function(){return d(null)},children:"X"}),Object(g.jsx)("h3",{className:"text-xl my-2 text-center",children:"Editar mensaje"}),Object(g.jsx)(ce,{initialText:null===i||void 0===i?void 0:i.text,handleSubmit:b})]})]})]})},ge=n(81),pe=["isAuthenticated","component"],Oe=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ge.a)(e,pe);return Object(g.jsx)(b.b,Object(L.a)(Object(L.a)({},a),{},{component:function(e){return t?Object(g.jsx)(n,Object(L.a)({},e)):Object(g.jsx)(b.a,{to:"/login"})}}))},fe=["isAuthenticated","component"],ve=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ge.a)(e,fe);return Object(g.jsx)(b.b,Object(L.a)(Object(L.a)({},a),{},{component:function(e){return t?Object(g.jsx)(b.a,{to:"/"}):Object(g.jsx)(n,Object(L.a)({},e))}}))},we=Object(k.a)(te||(te=Object(d.a)(["\n  query getUser{\n    getUser{\n      id\n      name\n      email\n    }\n  }\n"]))),ye=function(){var e=Object(I.a)(we),t=e.data,n=e.loading,a=e.error;return Object(c.useEffect)((function(){a&&localStorage.removeItem("token")}),[t,a]),n?Object(g.jsx)("h5",{children:"Espere..."}):Object(g.jsx)(u.a,{children:Object(g.jsxs)(b.d,{children:[Object(g.jsx)(b.b,{exact:!0,path:"/",component:ue}),Object(g.jsx)(Oe,{exact:!0,path:"/myMessages",component:he,isAuthenticated:!!(null===t||void 0===t?void 0:t.getUser)}),Object(g.jsx)(ve,{path:"/login",component:U,isAuthenticated:!!(null===t||void 0===t?void 0:t.getUser)}),Object(g.jsx)(ve,{path:"/signup",component:B,isAuthenticated:!!(null===t||void 0===t?void 0:t.getUser)}),Object(g.jsx)(b.a,{to:"/"})]})})},Ne=(n(269),n(278));n(270);var ke=function(){return Object(g.jsx)(Ne.a,{client:R,children:Object(g.jsx)(ye,{})})},Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Se(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(ke,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Se(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Se(t,e)}))}}()}},[[271,1,2]]]);
//# sourceMappingURL=main.49dbc2cd.chunk.js.map